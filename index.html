<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Pawlos M. | Architect & Developer</title>
    
    <!-- External CSS & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase SDKs for Main Page (Reads Data) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-cms-app';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        let db, auth;
        
        // Initialize Firebase
        async function initializeFirebase() {
            try {
                if (Object.keys(firebaseConfig).length === 0) throw new Error("Missing Config");
                
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Sign in for read access
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }
                
                // Start listener once auth is ready
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        window.loadProjectsFromFirestore();
                    }
                });

            } catch (error) {
                console.error("Firebase Init Error:", error);
                const grid = document.querySelector('.projects-grid');
                if(grid) grid.innerHTML = '<p style="text-align:center; color:red;">Database connection failed.</p>';
            }
        }
        
        // Expose helper for script.js
        window.getProjectsCollectionRef = () => {
            return collection(db, 'artifacts', appId, 'public', 'data', 'projects');
        };

        // Expose SDK functions for script.js
        window.dbQuery = query;
        window.dbOrderBy = orderBy;
        window.dbOnSnapshot = onSnapshot;

        document.addEventListener('DOMContentLoaded', initializeFirebase);
    </script>
</head>
<body>

    <div class="overlay" onclick="toggleMenu()"></div>

    <nav>
        <img alt="Logo" src="text-logo1.png" onerror="this.style.display='none'; document.write('<span style=\'font-weight:bold; font-size:1.2rem; color:#ede9d6;\'>PAWLOS.M</span>')"/>
        
        <div class="hamburger" onclick="toggleMenu()">
            <div></div><div></div><div></div>
        </div>

        <div class="nav-links">
            <span class="close-btn" onclick="toggleMenu()">×</span>
            <a href="#about" onclick="toggleMenu()">About</a>
            <a href="#skills" onclick="toggleMenu()">Skills</a>
            <a href="#projects" onclick="toggleMenu()">Projects</a>
            <a href="#contact" onclick="toggleMenu()">Contact</a>
            
            <!-- LINK TO CMS PAGE -->
            <a href="cms.html" target="_blank" style="color: #f4a261; border: 1px solid #f4a261; padding: 5px 15px; border-radius: 20px; margin-left: 10px;">
                <i class="fas fa-lock"></i> Admin
            </a>
        </div>
    </nav>

    <header>
        <div class="hero-content">
            <div class="profile-container">
                <div class="ring-one"></div>
                <div class="ring-two"></div>
                <img class="profile-img" alt="Pawlos Mulugeta" src="Profile-photo-Recoveredfinall.png" onerror="this.src='https://via.placeholder.com/200'"/>
            </div>
            
            <h1>Pawlos Mulugeta</h1>
            <p>Architect | Creative Designer | Innovator</p>
        </div>

        <div class="cube-wrapper">
            <div class="cube">
                <div class="face front">CODE</div>
                <div class="face back">DESIGN</div>
                <div class="face right">ARCH</div>
                <div class="face left">WEB</div>
                <div class="face top"><i class="fas fa-layer-group"></i></div>
                <div class="face bottom"><i class="fas fa-pencil-ruler"></i></div>
            </div>
        </div>
    </header>

    <section id="about">
        <h2>About Me</h2>
        <p style="max-width: 700px; margin: 0 auto; font-size: 1.2rem; line-height: 1.6;">
            I am an architect passionate about creating sustainable and innovative designs that blend functionality with aesthetics. 
            With a unique background in both physical architecture and digital development, I bridge the gap between built environments and digital experiences.
        </p>
    </section>

    <section id="skills">
        <h2>My Skills</h2>
        <div class="skills-container">
            <div class="skill-category">
                <h3>Architecture & Design</h3>
                <div class="skill-item"><div class="skill-info"><span>AutoCAD</span><span>95%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 95%;"></div></div></div>
                <div class="skill-item"><div class="skill-info"><span>SketchUp</span><span>90%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 90%;"></div></div></div>
                <div class="skill-item"><div class="skill-info"><span>Revit / BIM</span><span>90%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 90%;"></div></div></div>
                <div class="skill-item"><div class="skill-info"><span>3D Rendering</span><span>85%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 85%;"></div></div></div>
            </div>
            <div class="skill-category">
                <h3>Development & Web</h3>
                <div class="skill-item"><div class="skill-info"><span>UI/UX Design</span><span>95%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 95%;"></div></div></div>
                <div class="skill-item"><div class="skill-info"><span>HTML / CSS</span><span>90%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 90%;"></div></div></div>
                <div class="skill-item"><div class="skill-info"><span>JavaScript</span><span>80%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 80%;"></div></div></div>
                <div class="skill-item"><div class="skill-info"><span>Python</span><span>75%</span></div><div class="progress-bar-bg"><div class="progress-bar-fill" style="width: 75%;"></div></div></div>
            </div>
        </div>
    </section>

    <section id="projects">
        <h2>Projects</h2>
        
        <div class="filter-container">
            <button class="filter-btn active" onclick="filterProjects('all')">All</button>
            <button class="filter-btn" onclick="filterProjects('arch')">Architecture & Design</button>
            <button class="filter-btn" onclick="filterProjects('dev')">Development & Web</button>
        </div>

        <div class="projects-grid">
            <p style="text-align: center; color: #ccc;">Loading projects from database...</p>
        </div>
    </section>

    <section id="contact">
        <h2>Contact Me</h2>
        <div class="contact-container">
            <form>
                <input placeholder="Your Name" required type="text"/>
                <input placeholder="Email" required type="email"/>
                <textarea placeholder="Your Message" required rows="5"></textarea>
                <button type="submit">Send Message</button>
            </form>
            <div class="contact-details">
                <h3 style="color: var(--highlight-color); margin-top:0;">Info</h3>
                <p><i class="fas fa-phone"></i> +251 908 786 726</p>
                <p><i class="fas fa-envelope"></i> pawlob.21@gmail.com</p>
                <p><i class="fas fa-map-marker-alt"></i> Addis Ababa, Ethiopia</p>
                <!-- Map -->
                <div style="width:100%; height:200px; background:#222; margin-top:20px; display:flex; align-items:center; justify-content:center; color:#555;">
                   Map Placeholder
                </div>
                <div class="social-icons">
                    <a href="#" target="_blank"><i class="fab fa-facebook"></i></a>
                    <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="#" target="_blank"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
    </section>

    <footer>
        © 2025 Pawlos Mulugeta. All rights reserved.
    </footer>

    <button aria-label="Go to top" id="backToTop" onclick="scrollToTop()">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 4l-7 7h4v7h6v-7h4L12 4z"></path>
        </svg>
    </button>

    <script src="script.js"></script>
</body>
</html>
